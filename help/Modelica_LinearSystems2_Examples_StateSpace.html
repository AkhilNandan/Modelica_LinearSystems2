<HTML>
<HEAD>
<TITLE>Modelica_LinearSystems2.Examples.StateSpace</TITLE>
<META name="HTML-Generator" content="Dymola">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE StateSpace<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace"></A><A HREF="Modelica_LinearSystems2_Examples.html#Modelica_LinearSystems2.Examples"
>Modelica_LinearSystems2.Examples</A>.StateSpace</H2>
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysis" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysis"
>analysis</A>
</TD><TD>Example to check controllability of a state space system</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisControllability" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisControllability"
>analysisControllability</A>
</TD><TD>Example to check controllability of a state space system</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisObservability" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisObservability"
>analysisObservability</A>
</TD><TD>Example to check controllability of a state space system</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisControllablePoles" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisControllablePoles"
>analysisControllablePoles</A>
</TD><TD>Example to check controllability of a state space system and print the controllable poles</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisTimeResponse" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisTimeResponse"
>analysisTimeResponse</A>
</TD><TD>Compute time response of a state space system</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisInitialResponse" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisInitialResponse"
>analysisInitialResponse</A>
</TD><TD>Initial response example</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisImpulseResponse" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisImpulseResponse"
>analysisImpulseResponse</A>
</TD><TD>Impulse response example</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisStepResponse" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisStepResponse"
>analysisStepResponse</A>
</TD><TD>Step response example</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisPolesAndZeros_SISO" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisPolesAndZeros_SISO"
>analysisPolesAndZeros_SISO</A>
</TD><TD>Compute poles and invariant zeros of a SISO state space system by transformation to a minmal system</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisStairCase" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisStairCase"
>analysisStairCase</A>
</TD><TD>Example to check controllability of a state space system</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.analysisInvariantZeros" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.analysisInvariantZeros"
>analysisInvariantZeros</A>
</TD><TD>Compute invariant zeros of transfer function</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.conversionFromZerosAndPoles" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.conversionFromZerosAndPoles"
>conversionFromZerosAndPoles</A>
</TD><TD>  Transform a TransferFunction into a StateSpace description</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.conversionToTransferFunctionMIMO" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.conversionToTransferFunctionMIMO"
>conversionToTransferFunctionMIMO</A>
</TD><TD>Example to compute a transfer function matrix of a MIMO system from state space representation</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.conversionToTransferFunctionSISO" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.conversionToTransferFunctionSISO"
>conversionToTransferFunctionSISO</A>
</TD><TD>Example to compute a transfer function from SISO state space representation</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.conversionToZerosAndPolesMIMO" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.conversionToZerosAndPolesMIMO"
>conversionToZerosAndPolesMIMO</A>
</TD><TD>Example to compute a zeros-and-poles representation of a MIMO system from state space representation</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.analysisS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.conversionToZerosAndPolesSISO" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.conversionToZerosAndPolesSISO"
>conversionToZerosAndPolesSISO</A>
</TD><TD>Example to compute a zeros and poles representation from SISO state space representation</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISO" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISO"
>designAssignPolesSISO</A>
</TD><TD>Example for pole placing using Ackermann&#39;s method</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesMIMO" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesMIMO"
>designAssignPolesMIMO</A>
</TD><TD>Example for pole placing</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designKalmanFilter" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.designKalmanFilter"
>designKalmanFilter</A>
</TD><TD>Description</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designLQG" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.designLQG"
>designLQG</A>
</TD><TD>Description</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designLQR" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.designLQR"
>designLQR</A>
</TD><TD>Description</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZeros" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZeros"
>plotPolesAndZeros</A>
</TD><TD>Example for plotting eigenvalues and invariant zeros of a state space system</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.plotBodeMIMO" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.plotBodeMIMO"
>plotBodeMIMO</A>
</TD><TD>Constructs zeros-and-poles-transfers from state space representation and plots the Bode diagrams with automatic determination of the frequency range to plot </TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.plotBodeSISO" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.plotBodeSISO"
>plotBodeSISO</A>
</TD><TD>Constructs a zeros-and-poles-transfer function from state space representation and plots the Bode diagram with automatic determination of the frequency range to plot </TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.plotTimeResponse" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.plotTimeResponse"
>plotTimeResponse</A>
</TD><TD>Time response plot example</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.plotImpulse" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.plotImpulse"
>plotImpulse</A>
</TD><TD>Impulse plot example</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.plotInital" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.plotInital"
>plotInital</A>
</TD><TD>Initial condition plot example</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.plotRamp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.plotRamp"
>plotRamp</A>
</TD><TD>Plot ramp response</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.plotStep" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.plotStep"
>plotStep</A>
</TD><TD>Step plot example</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.plotZeros" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.plotZeros"
>plotZeros</A>
</TD><TD>case studies of systems with zeros</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.transformation" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.transformation"
>transformation</A>
</TD><TD>Example to demonstrate the transformation to Jordan- observabilitiy- and controllability canonical form</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.transformationExtract" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.transformationExtract"
>transformationExtract</A>
</TD><TD>Example how to extract input/output related subsystems from state space system record</TD></TR>
<TR><TD><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZerosS.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.transformationToIrreducibleForm" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace.transformationToIrreducibleForm"
>transformationToIrreducibleForm</A>
</TD><TD>Example to compute the minimal state space realization of a given SISO state space realization</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysis<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysis"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysis</H2>
<B>Example to check controllability of a state space system</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
This example shows the usage of <b>function Modelica_LinearSystems2.StateSpace.Analysis.isControllable</b> which is 
to check whether a system is controllable or not.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ssi</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_LinearSystems2_Internal.html#Modelica_LinearSystems2.Internal.AnalyseOptions"
>AnalyseOptions</A></TD><TD>analyseOptions</TD><TD>Modelica_LinearSystems2.Inte...</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysis <font color="darkgreen">
  &quot;Example to check controllability of a state space system&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2"
>Modelica_LinearSystems2</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssi=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-3,2,-3,4,5,6; 0,6,7,8,9,4; 0,2,3,0,78,6; 0,1,2,2,3,3; 0,13,34,0,0,1; 0,
        0,0,-17,0,0],
      B=[1,0; 0,1; 1,0; 0,1; 1,0; 0,1],
      C=[0,0,1,0,1,0; 0,1,0,0,1,1],
      D=[0,0; 0,0],
      xNames={&quot;x1&quot;,&quot;x2&quot;,&quot;x3&quot;,&quot;x4&quot;,&quot;x5&quot;,&quot;x6&quot;},
      uNames={&quot;u1&quot;,&quot;u2&quot;}, yNames={&quot;y1&quot;,&quot;y2&quot;});
  <font color="blue">input </font><A HREF="Modelica_LinearSystems2_Internal.html#Modelica_LinearSystems2.Internal.AnalyseOptions"
>Internal.AnalyseOptions</A> analyseOptions=
      <font color="red">Modelica_LinearSystems2.Internal.AnalyseOptions</font>(
      plotEigenValues=true,
      plotInvariantZeros=true,
      plotStepResponse=true,
      plotFrequencyResponse=true,
      printEigenValues=true,
      printEigenValueProperties=true,
      printInvariantZeros=true,
      printControllability=true,
      printObservability=true,
      headingEigenValues=&quot;Eigenvalues&quot;,
      headingInvariantzeros=&quot;Invariant zeros&quot;,
      headingStepResponse=&quot;Step response&quot;,
      headingFrequencyResponse=&quot;Frequency response&quot;);

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;
  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font><font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(fileName)<font color="blue"> else </font>ssi;

<font color="blue">algorithm </font>
  ok := false;
  <font color="red">StateSpace.Analysis.analysis</font>(ss, fileName=&quot;analysis.html&quot;, analyseOptions=analyseOptions, description=&quot;Description of the system&quot;);
  ok := true;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>analysis;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisControllability<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisControllability"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisControllability</H2>
<B>Example to check controllability of a state space system</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
This example shows the usage of <b>function Modelica_LinearSystems2.StateSpace.Analysis.isControllable</b> which is 
to check whether a system is controllable or not.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ssi</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisControllability <font color="darkgreen">
  &quot;Example to check controllability of a state space system&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2"
>Modelica_LinearSystems2</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Math_Matrices.html#Modelica_LinearSystems2.Math.Matrices"
>Modelica_LinearSystems2.Math.Matrices</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Types.html#Modelica_LinearSystems2.Types.StaircaseMethod"
>Modelica_LinearSystems2.Types.StaircaseMethod</A>;

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssi=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[1,0,0,0,0,0; 1,0,0,0,0,0; 0,2,3,0,78,6; 1,1,2,2,3,3; 10,13,34,0,0,1; 0,
        0,0,2,0,0],
      B=[0,0; 0,0; 0,0; 0,0; 1,0; 0,0],
      C=[1,0,1,0,1,0; 0,1,0,1,0,1; 0,1,0,1,0,1],
     D=[0,0; 0,0; 0,0]);

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;
  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font><font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(
                                                          fileName)<font color="blue"> else </font>ssi;
  <A HREF="Modelica_LinearSystems2_Types.html#Modelica_LinearSystems2.Types.StaircaseMethod"
>StaircaseMethod</A> method;
  Boolean isControllable;
  Boolean isSISO=<font color="red">StateSpace.Internal.isSISO</font>(ss);

<font color="blue">algorithm </font>
  ok := false;

  method := StaircaseMethod.QR;
  isControllable :=<font color="red"> StateSpace.Analysis.isControllable</font>(ss, method);

  <font color="blue">if </font>isSISO<font color="blue"> then</font>
    <font color="blue">if </font>isControllable<font color="blue"> then</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is controllable&quot;);
    <font color="blue">else</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is not controllable&quot;);
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    <font color="blue">if </font>isControllable<font color="blue"> then</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(
        &quot;pair (A, B) is controllable by QR factorzation&quot;);
    <font color="blue">else</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(
        &quot;pair (A, B) is not controllable by QR factorzation&quot;);
    <font color="blue">end if</font>;

    method := StaircaseMethod.SVD;
    isControllable :=<font color="red"> StateSpace.Analysis.isControllable</font>(ss, method);
    <font color="blue">if </font>isControllable<font color="blue"> then</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is controllable by SVD&quot;);
    <font color="blue">else</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is not controllable by SVD&quot;);
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

  ok := true;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>analysisControllability;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisObservability<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisObservability"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisObservability</H2>
<B>Example to check controllability of a state space system</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
This example shows the usage of <b>function Modelica_LinearSystems2.StateSpace.Analysis.isObservable</b> which is 
to check whether a system is observable or not.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ssi</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisObservability <font color="darkgreen">
  &quot;Example to check controllability of a state space system&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2"
>Modelica_LinearSystems2</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Math_Matrices.html#Modelica_LinearSystems2.Math.Matrices"
>Modelica_LinearSystems2.Math.Matrices</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;

   <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssi=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[1,2,3,4,5,6; 5,6,7,8,9,4; 0,2,3,0,78,6; 1,1,2,2,3,3; 10,13,34,0,0,1; 0,
        0,0,2,0,1],
      B=[1,0; 2,0; 0,1; 0,2; 0,0; 0,1],
      C=[1,0,1,0,1,0; 0,1,0,0,0,0],
     D=[0,0; 0,0]);

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;
  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font><font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(
                                                          fileName)<font color="blue"> else </font>ssi;

  Boolean isObservable;
<A HREF="Modelica_LinearSystems2_Types.html#Modelica_LinearSystems2.Types.StaircaseMethod"
>Modelica_LinearSystems2.Types.StaircaseMethod</A> method;
  Boolean isSISO=<font color="red">StateSpace.Internal.isSISO</font>(ss);
<font color="blue">algorithm </font>
  ok := false;

  method:=  Modelica_LinearSystems2.Types.StaircaseMethod.QR;
  isObservable :=<font color="red"> StateSpace.Analysis.isObservable</font>(ss,method);

 <font color="blue">if </font>isSISO<font color="blue"> then</font>
    <font color="blue">if </font>isObservable<font color="blue"> then</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is observable&quot;);
    <font color="blue">else</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is not observable&quot;);
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    <font color="blue">if </font>isObservable<font color="blue"> then</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(
        &quot;pair (A, B) is observable checked by QR factorzation&quot;);
    <font color="blue">else</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(
        &quot;pair (A, B) is not observable checked by QR factorzation&quot;);
    <font color="blue">end if</font>;

    method := Modelica_LinearSystems2.Types.StaircaseMethod.SVD;
    isObservable :=<font color="red"> StateSpace.Analysis.isObservable</font>(ss, method);
    <font color="blue">if </font>isObservable<font color="blue"> then</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is observable checked by SVD&quot;);
    <font color="blue">else</font>
      <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is not observable checked by SVD&quot;);
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

  ok := true;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>analysisObservability;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisControllablePoles<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisControllablePoles"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisControllablePoles</H2>
<B>Example to check controllability of a state space system and print the controllable poles</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
This example shows the usage of <b>function Modelica_LinearSystems2.StateSpace.Analysis.isControllable</b> which is 
to check whether a system is controllable or not.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ssi</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisControllablePoles <font color="darkgreen">
  &quot;Example to check controllability of a state space system and print the controllable poles&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2"
>Modelica_LinearSystems2</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Math_Matrices.html#Modelica_LinearSystems2.Math.Matrices"
>Modelica_LinearSystems2.Math.Matrices</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssi=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[1,0,0,0,0,0; 1,0,0,0,0,0; 0,2,3,0,78,6; 1,1,2,2,3,3; 10,13,34,0,0,1; 0,
        0,0,2,0,0],
      B=[0,0; 0,0; 0,0; 0,0; 1,0; 0,0],
      C=[1,0,1,0,1,0; 0,1,0,1,0,1; 0,1,0,1,0,1],
      D=[0,0; 0,0; 0,0]);

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;
  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font>
      <font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(fileName)<font color="blue"> else </font>ssi;
  Real cPoles[:,2] <font color="darkgreen">&quot;controllable poles&quot;</font>;
  Real ncPoles[:,2] <font color="darkgreen">&quot;uncontrollable poles&quot;</font>;

<font color="blue">algorithm </font>
  (cPoles,ncPoles) :=<font color="red"> StateSpace.Internal.controllablePoles</font>(ss);
  <font color="blue">if </font><font color="red">size</font>(ncPoles, 1) == 0<font color="blue"> then</font>
    <font color="red">print</font>(&quot;\nThe system is controllable\nThe poles are&quot; +
      <font color="red">Modelica_LinearSystems2.Math.Matrices.printMatrix</font>(cPoles,6,&quot;&quot;));
  <font color="blue">else</font>
    <font color="red">print</font>(&quot;\nThe system is not controllable\nThe uncontrollable poles are&quot; +
      <font color="red">Modelica_LinearSystems2.Math.Matrices.printMatrix</font>(ncPoles,6,&quot;&quot;));
  <font color="blue">end if</font>;

ok := true;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>analysisControllablePoles;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisTimeResponse<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisTimeResponse"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisTimeResponse</H2>
<B>Compute time response of a state space system</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes the time response of the system
StateSpace <i>sc = StateSpace(A=[-1,1;0,-2],B=[1, 0;0, 1],C=[1,0; 0,1],D=[0, 0; 0, 0])</i>, 
sampled at <i>Ts=0.01</i> with inititial state <i>x0=[0;0]</i>
subject to the system input <i>u = ones(samples,2)</i>, (<i>samples</i> is set to 30).
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>u[:, 2]</TD><TD>ones(300, 2)</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisTimeResponse <font color="darkgreen">
  &quot;Compute time response of a state space system&quot;</font>
  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2"
>Modelica_LinearSystems2</A>;

 <font color="blue">input </font>Real u[:,2]=<font color="red">ones</font>(300, 2);
<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> sc=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[1,0; 0,1],
      C=[1,0; 0,1],
      D=[0,0; 0,0]);
  Real Ts=0.01;

  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.DiscreteStateSpace"
>Modelica_LinearSystems2.DiscreteStateSpace</A> sd=
      <font color="red">Modelica_LinearSystems2.DiscreteStateSpace</font>(sc, Ts);
  Integer samples=<font color="red">size</font>(u,1);
  Real x0[2]={0, 0};

  <font color="blue">output </font>Real y[samples,2] <font color="darkgreen">
    &quot;System response (dimension: (input samples) x (number of outputs))&quot;</font>;
  <font color="blue">output </font>Real t[samples] <font color="darkgreen">&quot;Time vector used for simulation&quot;</font>;
  <font color="blue">output </font>Real x[samples,2] <font color="darkgreen">
    &quot;State trajectories (dimension: (input samples) x (number of states)&quot;</font>;
<font color="blue">algorithm </font>
   t := 0:sd.Ts:(samples*sd.Ts - sd.Ts);
  (y,x) :=<font color="red"> Modelica_LinearSystems2.DiscreteStateSpace.timeResponse</font>(
    sd,
    u,
    x0);

 <font color="red">Modelica_LinearSystems2.Utilities.Plot.diagram</font>(
       <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                 curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,1],
                          legend=&quot;y1&quot;),
                          <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,2],
                          legend=&quot;y2&quot;)},
                 heading=&quot;Step response to synchronous step of u1 and u2&quot;,
                 xLabel=&quot;time [s]&quot;,
                 yLabel=&quot;y1, y2&quot;));
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>analysisTimeResponse;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisInitialResponse<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisInitialResponse"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisInitialResponse</H2>
<B>Initial response example</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes and plots the step response
<pre></PRE><P>

<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y[:, size(sc.C, 1), 1]</TD><TD>Output response: (number of samples) x (number of outputs) x 1</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisInitialResponse <font color="darkgreen">&quot;Initial response example&quot;</font>

  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> sc=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[1,0; 0,1],
      C=[1,0; 0,1],
      D=[0,0; 0,0]);

  Real t[:] <font color="darkgreen">&quot;Time vector: (number of samples)&quot;</font>;
 Real x_continuous[:,2,1] <font color="darkgreen">
    &quot;State trajectories: (number of samples) x (number of states) x 1&quot;</font>;
 Real x0[2]=<font color="red">ones</font>(2) <font color="darkgreen">&quot;Initial state vector&quot;</font>;

<font color="blue">public </font>
<font color="blue">output </font>Real y[:,<font color="red">size</font>(sc.C, 1),1] <font color="darkgreen">
    &quot;Output response: (number of samples) x (number of outputs) x 1&quot;</font>;
<font color="darkgreen">// output Real y[:,size(sc.C, 1),size(sc.B, 2)]</font>
<font color="darkgreen">//     &quot;Output response: (number of samples) x (number of outputs) x (number of inuputs)&quot;;</font>

<font color="blue">algorithm </font>
 (y,t,x_continuous) :=<font color="red"> Modelica_LinearSystems2.StateSpace.Analysis.initialResponse</font>(x0=x0,sc=sc,dt=0.1,tSpan=5);

<font color="darkgreen">//  Modelica_LinearSystems2.Utilities.Plot.diagramVector({</font>
<font color="darkgreen">//        Modelica_LinearSystems2.Utilities.Plot.Records.Diagram(</font>
<font color="darkgreen">//                  curve={Modelica_LinearSystems2.Utilities.Plot.Records.Curve(</font>
<font color="darkgreen">//                           x=t,</font>
<font color="darkgreen">//                           y=y[:,1,1],</font>
<font color="darkgreen">//                           legend=&quot;y1&quot;),</font>
<font color="darkgreen">//                           Modelica_LinearSystems2.Utilities.Plot.Records.Curve(</font>
<font color="darkgreen">//                           x=t,</font>
<font color="darkgreen">//                           y=y[:,1,2],</font>
<font color="darkgreen">//                           legend=&quot;y2&quot;)},</font>
<font color="darkgreen">//                  heading=&quot;Initial response to u1&quot;,</font>
<font color="darkgreen">//                  xLabel=&quot;time [s]&quot;,</font>
<font color="darkgreen">//                  yLabel=&quot;y1, y2&quot;),</font>
<font color="darkgreen">//        Modelica_LinearSystems2.Utilities.Plot.Records.Diagram(</font>
<font color="darkgreen">//                  curve={Modelica_LinearSystems2.Utilities.Plot.Records.Curve(</font>
<font color="darkgreen">//                           x=t,</font>
<font color="darkgreen">//                           y=y[:,2,1],</font>
<font color="darkgreen">//                           legend=&quot;y1&quot;),</font>
<font color="darkgreen">//                           Modelica_LinearSystems2.Utilities.Plot.Records.Curve(</font>
<font color="darkgreen">//                           x=t,</font>
<font color="darkgreen">//                           y=y[:,2,2],</font>
<font color="darkgreen">//                           legend=&quot;y2&quot;)},</font>
<font color="darkgreen">//                  heading=&quot;Initial response to u2&quot;,</font>
<font color="darkgreen">//                  xLabel=&quot;time [s]&quot;,</font>
<font color="darkgreen">//                  yLabel=&quot;y1, y2&quot;)});</font>

  <font color="red">Modelica_LinearSystems2.Utilities.Plot.diagramVector</font>({
        <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                  curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                           x=t,
                           y=y[:,1,1],
                           legend=&quot;y1&quot;)},
                  heading=&quot;Initial response y1&quot;,
                  xLabel=&quot;time [s]&quot;),
        <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                  curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                           x=t,
                           y=y[:,2,1],
                           legend=&quot;y2&quot;)},
                  heading=&quot;Initial response y2&quot;,
                  xLabel=&quot;time [s]&quot;)});

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>analysisInitialResponse;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisImpulseResponse<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisImpulseResponse"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisImpulseResponse</H2>
<B>Impulse response example</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes and plots the step response
<pre></PRE><P>

<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y[:, size(sc.C, 1), size(sc.B, 2)]</TD><TD>Output response: (number of samples) x (number of outputs) x (number of inuputs)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisImpulseResponse <font color="darkgreen">&quot;Impulse response example&quot;</font>

  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> sc=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[4,0; 0,2],
      C=[2,0; 0,3],
      D=[0,0; 0,0]);

  Real t[:] <font color="darkgreen">&quot;Time vector: (number of samples)&quot;</font>;
 Real x_continuous[:,<font color="red">size</font>(sc.A, 1),<font color="red">size</font>(sc.B, 2)] <font color="darkgreen">
    &quot;State trajectories: (number of samples) x (number of states) x (number of inputs)&quot;</font>;

<font color="blue">public </font>
<font color="blue">output </font>Real y[:,<font color="red">size</font>(sc.C, 1),<font color="red">size</font>(sc.B, 2)] <font color="darkgreen">
    &quot;Output response: (number of samples) x (number of outputs) x (number of inuputs)&quot;</font>;

<font color="blue">algorithm </font>
 (y,t,x_continuous) :=<font color="red"> Modelica_LinearSystems2.StateSpace.Analysis.impulseResponse</font>(sc=sc,dt=0.1,tSpan=5);

 <font color="red">Modelica_LinearSystems2.Utilities.Plot.diagramVector</font>({
       <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                 curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,1,1],
                          legend=&quot;y1&quot;),
                          <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,2,1],
                          legend=&quot;y2&quot;)},
                 heading=&quot;Impulse response to u1&quot;,
                 xLabel=&quot;time [s]&quot;,
                 yLabel=&quot;y1, y2&quot;),
       <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                 curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,1,2],
                          legend=&quot;y1&quot;),
                          <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,2,2],
                          legend=&quot;y2&quot;)},
                 heading=&quot;Impulse response to u2&quot;,
                 xLabel=&quot;time [s]&quot;,
                 yLabel=&quot;y1, y2&quot;)});
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>analysisImpulseResponse;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisStepResponse<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisStepResponse"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisStepResponse</H2>
<B>Step response example</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes and plots the step response
<pre></PRE><P>

<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y[:, size(sc.C, 1), size(sc.B, 2)]</TD><TD>Output response: (number of samples) x (number of outputs) x (number of inuputs)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisStepResponse <font color="darkgreen">&quot;Step response example&quot;</font>

  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> sc=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[1,0; 0,1],
      C=[1,0; 0,1],
      D=[0,0; 0,0]);

  Real t[:] <font color="darkgreen">&quot;Time vector: (number of samples)&quot;</font>;
 Real x_continuous[:,<font color="red">size</font>(sc.A, 1),<font color="red">size</font>(sc.B, 2)] <font color="darkgreen">
    &quot;State trajectories: (number of samples) x (number of states) x (number of inputs)&quot;</font>;

<font color="blue">public </font>
<font color="blue">output </font>Real y[:,<font color="red">size</font>(sc.C, 1),<font color="red">size</font>(sc.B, 2)] <font color="darkgreen">
    &quot;Output response: (number of samples) x (number of outputs) x (number of inuputs)&quot;</font>;

<font color="blue">algorithm </font>
  (y,t,x_continuous) :=
    <font color="red">Modelica_LinearSystems2.StateSpace.Analysis.stepResponse</font>(
    sc=sc,
    dt=0.1,
    tSpan=5);

 <font color="red">Modelica_LinearSystems2.Utilities.Plot.diagramVector</font>({
       <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                 curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,1,1],
                          legend=&quot;y1&quot;),
                          <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,2,1],
                          legend=&quot;y2&quot;)},
                 heading=&quot;Step response to u1&quot;,
                 xLabel=&quot;time [s]&quot;,
                 yLabel=&quot;y1, y2&quot;),
       <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                 curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,1,2],
                          legend=&quot;y1&quot;),
                          <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,2,2],
                          legend=&quot;y2&quot;)},
                 heading=&quot;Step response to u2&quot;,
                 xLabel=&quot;time [s]&quot;,
                 yLabel=&quot;y1, y2&quot;)});
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>analysisStepResponse;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisPolesAndZeros_SISO<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisPolesAndZeros_SISO"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisPolesAndZeros_SISO</H2>
<B>Compute poles and invariant zeros of a SISO state space system by transformation to a minmal system</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system matrices</TD></TR>
<TR><TD>Real</TD><TD>A[:, :]</TD><TD>[-1.0, 0.0, 0.0; 0.0, -2.0, ...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>B[:, :]</TD><TD>[1.0; 1.0; 0.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>C[:, :]</TD><TD>[1.0, 1.0, 1.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>D[:, :]</TD><TD>[0.0]</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisPolesAndZeros_SISO <font color="darkgreen">
  &quot;Compute poles and invariant zeros of a SISO state space system by transformation to a minmal system&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Modelica_LinearSystems2.Math.Complex</A>;

  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">input </font>Real A[:,:]=[-1.0,0.0,0.0; 0.0,-2.0,0.0; 0.0,0.0,-3.0];
  <font color="blue">input </font>Real B[:,:]=[1.0; 1.0; 0.0];
  <font color="blue">input </font>Real C[:,:]=[1.0,1.0,1.0];
  <font color="blue">input </font>Real D[:,:]=[0.0];

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  Boolean systemOnFile=fileName &lt;&gt; &quot;NoName&quot;;

  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font>
      <font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(  fileName, matrixName)<font color="blue"> else </font>
      <font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssm=<font color="red">Modelica_LinearSystems2.StateSpace.Transformation.toIrreducibleForm</font>(
                                                                 ss);
  <A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A> poles[:];
  <A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A> zeros[:];

<font color="blue">algorithm </font>
  poles :=<font color="red"> Complex.eigenValues</font>(ssm.A);

  <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(poles, 1)<font color="blue"> loop</font>

    <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pole_&quot; +<font color="red"> String</font>(i) + &quot; = &quot; +<font color="red"> String</font>(poles[i]));
  <font color="blue">end for</font>;

  zeros :=<font color="red"> Modelica_LinearSystems2.StateSpace.Analysis.invariantZeros</font>(
                                      ssm);

  <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(zeros, 1)<font color="blue"> loop</font>
    <font color="red"> Modelica.Utilities.Streams.print</font>(&quot;zero_&quot; +<font color="red"> String</font>(i) + &quot; = &quot; +<font color="red"> String</font>(zeros[i]));
  <font color="blue">end for</font>;

  ok := true;

<font color="blue">end </font>analysisPolesAndZeros_SISO;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisStairCase<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisStairCase"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisStairCase</H2>
<B>Example to check controllability of a state space system</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
This example shows the usage of <b>function Modelica_LinearSystems2.StateSpace.Design.assignPolesMI</b> which is 
to design pole assigment controllers for state space systems with multiple input.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ssi</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisStairCase <font color="darkgreen">
  &quot;Example to check controllability of a state space system&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2"
>Modelica_LinearSystems2</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Math_Matrices.html#Modelica_LinearSystems2.Math.Matrices"
>Modelica_LinearSystems2.Math.Matrices</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;
  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssi=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[1,2,3,4,5,6; 5,6,7,8,9,4; 0,2,3,0,78,6; 1,1,2,2,3,3; 10,13,34,0,0,1; 0,
        0,0,2,0,1],
      B=[1; 2; 0; 0; 0; 0],
      C=[1,0,1,0,1,0],
      D=[0]);

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font>
  <font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(fileName)<font color="blue"> else </font>ssi;
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss2=<font color="red">StateSpace.Internal.transposeStateSpace</font>(ss);
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss3=ss;
  Boolean isControllable;
  Boolean isObservable;
  <A HREF="Modelica_LinearSystems2_Internal.html#Modelica_LinearSystems2.Internal.StateSpaceR"
>Modelica_LinearSystems2.Internal.StateSpaceR</A> ssR;

<font color="blue">algorithm </font>
  ok := false;

  (isControllable,ssR) :=<font color="red"> StateSpace.Internal.staircaseSVD</font>(ss);
  ss3.A:=ssR.A;
  ss3.B:=ssR.B;
  ss3.C:=ssR.C;
  ss3.D:=ssR.D;
  <font color="blue">if </font>isControllable<font color="blue"> then</font>
    <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is controllable&quot;);
  <font color="blue">else</font>
    <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, B) is not controllable&quot;);
  <font color="blue">end if</font>;

 <font color="red">Modelica.Utilities.Streams.print</font>(&quot;Transformed system is&quot;+<font color="red">String</font>(ss3));

 (isObservable,ssR) :=<font color="red"> StateSpace.Internal.staircaseSVD</font>(ss2);
  ss3.A:=ssR.A;
  ss3.B:=ssR.B;
  ss3.C:=ssR.C;
  ss3.D:=ssR.D;
  <font color="blue">if </font>isObservable<font color="blue"> then</font>
    <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, C) is observable&quot;);
  <font color="blue">else</font>
    <font color="red">Modelica.Utilities.Streams.print</font>(&quot;pair (A, C) is not observable&quot;);
  <font color="blue">end if</font>;
  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;\nTransformed dual system is:\n&quot;+<font color="red">String</font>(ss3));

  ok := true;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>analysisStairCase;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE analysisInvariantZeros<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.analysisInvariantZeros"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.analysisInvariantZeros</H2>
<B>Compute invariant zeros of transfer function</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A></TD><TD>z[:]</TD><TD>{-2 + 0*j,-3 + 4*j,-3 - 4*j}</TD><TD>Zeros (Complex vector of numerator zeros)</TD></TR>
<TR><TD><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A></TD><TD>p[:]</TD><TD>{-0.5 + 0*j,-5 + 2*j,-5 - 2*j}</TD><TD>Poles (Complex vector of denominator zeros)</TD></TR>
<TR><TD>Real</TD><TD>k</TD><TD>1.0</TD><TD>Constant multiplied with transfer function</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> analysisInvariantZeros <font color="darkgreen">
  &quot;Compute invariant zeros of transfer function&quot;</font>
  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Modelica_LinearSystems2.Math.Complex</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>Modelica_LinearSystems2.TransferFunction</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>Modelica_LinearSystems2.ZerosAndPoles</A>;

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A> z[:]={-2 + 0*j,-3 + 4*j,-3 - 4*j} <font color="darkgreen">
    &quot;Zeros (Complex vector of numerator zeros)&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A> p[:]={-0.5 + 0*j,-5 + 2*j,-5 - 2*j} <font color="darkgreen">
    &quot;Poles (Complex vector of denominator zeros)&quot;</font>;
  <font color="blue">input </font>Real k=1.0 <font color="darkgreen">&quot;Constant multiplied with transfer function&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">input </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A> j=<font color="red">Modelica_LinearSystems2.Math.Complex.j</font>();

  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>ZerosAndPoles</A> zp=<font color="red">ZerosAndPoles</font>(
      z=z,
      p=p,
      k=k);

  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="red">StateSpace</font>(zp);
  <A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A> Zeros[:];
  Boolean ok;
<font color="blue">algorithm </font>
  Zeros :=<font color="red"> Modelica_LinearSystems2.StateSpace.Analysis.invariantZeros</font>(ss);

  <font color="blue">if </font><font color="red">size</font>(Zeros, 1) == 0<font color="blue"> then</font>
    <font color="red">print</font>(&quot;\nSystem\n  &quot;+<font color="red">String</font>(zp)+&quot;\nhas no invariant zeros\n&quot;);
  <font color="blue">else</font>
    <font color="red">print</font>(&quot;\nSystem\n  zp = &quot;+<font color="red">String</font>(zp)+&quot;\n has &quot; +<font color="red"> String</font>(<font color="red">size</font>(Zeros, 1)) + &quot; invariant zeros:&quot;);
    <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(Zeros, 1)<font color="blue"> loop</font>
      <font color="red">print</font>(&quot;   &quot; +<font color="red"> String</font>(Zeros[i]));
    <font color="blue">end for</font>;
  <font color="blue">end if</font>;
  ok := true;
<font color="blue">end </font>analysisInvariantZeros;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE conversionFromZerosAndPoles<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.conversionFromZerosAndPoles"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.conversionFromZerosAndPoles</H2>
<B>  Transform a TransferFunction into a StateSpace description</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>ZerosAndPoles</A></TD><TD>zp</TD><TD>Modelica_LinearSystems2.Zero...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> conversionFromZerosAndPoles <font color="darkgreen">
  &quot;  Transform a TransferFunction into a StateSpace description&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>Modelica_LinearSystems2.ZerosAndPoles</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Modelica_LinearSystems2.Math.Complex</A>;

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>ZerosAndPoles</A> zp=<font color="red"> Modelica_LinearSystems2.ZerosAndPoles</font>({2+0*j}, {1+0*j,2+3*j,2-3*j}, 4);
<font color="blue">protected </font>
 <font color="blue">input </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A> j =<font color="red"> Modelica_LinearSystems2.Math.Complex.j</font>();
<font color="blue">public </font>
  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="red">StateSpace</font>(zp);

  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>ZerosAndPoles</A> zp2;

<font color="blue">algorithm </font>
  <font color="red"> Modelica.Utilities.Streams.print</font>(&quot;zp = &quot; +<font color="red"> String</font>(zp));
  <font color="red"> Modelica.Utilities.Streams.print</font>(&quot;ss = &quot; +<font color="red"> String</font>(ss));
   ok := true;

<font color="blue">end </font>conversionFromZerosAndPoles;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE conversionToTransferFunctionMIMO<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.conversionToTransferFunctionMIMO"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.conversionToTransferFunctionMIMO</H2>
<B>Example to compute a transfer function matrix of a MIMO system from state space representation</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system matrices</TD></TR>
<TR><TD>Real</TD><TD>A[:, size(A, 1)]</TD><TD>[-1.0, 0.0, 0.0; 0.0, -2.0, ...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>B[size(A, 2), :]</TD><TD>[0.0, 1.0; 1.0, 1.0; -1.0, 0...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>C[:, size(A, 1)]</TD><TD>[0.0, 1.0, 1.0; 1.0, 1.0, 1.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>D[size(C, 1), size(B, 2)]</TD><TD>[1.0, 0.0; 0.0, 1.0]</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> conversionToTransferFunctionMIMO <font color="darkgreen">
  &quot;Example to compute a transfer function matrix of a MIMO system from state space representation&quot;</font>
  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2"
>Modelica_LinearSystems2</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>Modelica_LinearSystems2.TransferFunction</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;

  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">input </font>Real A[:,<font color="red">size</font>(A, 1)]=[-1.0,0.0,0.0; 0.0,-2.0,0.0; 0.0,0.0,-3.0];
  <font color="blue">input </font>Real B[<font color="red">size</font>(A, 2),:]=[0.0,1.0; 1.0,1.0; -1.0,0.0];
  <font color="blue">input </font>Real C[:,<font color="red">size</font>(A, 1)]=[0.0,1.0,1.0; 1.0,1.0,1.0];
  <font color="blue">input </font>Real D[<font color="red">size</font>(C, 1),<font color="red">size</font>(B, 2)]=[1.0,0.0; 0.0,1.0];

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font>
      <font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(  fileName, matrixName)<font color="blue"> else </font>
      <font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);

  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>Modelica_LinearSystems2.TransferFunction</A> tf[:,:];

<font color="blue">algorithm </font>
  tf :=<font color="red"> StateSpace.Conversion.toTransferFunctionMIMO</font>(ss);
  <font color="blue">for </font>i1<font color="blue"> in </font>1:<font color="red">size</font>(ss.C, 1)<font color="blue"> loop</font>
    <font color="blue">for </font>i2<font color="blue"> in </font>1:<font color="red">size</font>(ss.B, 2)<font color="blue"> loop</font>

      <font color="red">Modelica.Utilities.Streams.print</font>(&quot;TransferFunction[&quot; +<font color="red"> String</font>(i1) + &quot;,&quot; +
        <font color="red">String</font>(i2) + &quot;] = &quot; +<font color="red"> String</font>(tf[i1, i2]));
    <font color="blue">end for</font>;
  <font color="blue">end for</font>;
  ok := true;

<font color="blue">end </font>conversionToTransferFunctionMIMO;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE conversionToTransferFunctionSISO<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.conversionToTransferFunctionSISO"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.conversionToTransferFunctionSISO</H2>
<B>Example to compute a transfer function from SISO state space representation</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system matrices</TD></TR>
<TR><TD>Real</TD><TD>A[:, :]</TD><TD>[-1.0, 0.0, 0.0; 0.0, -2.0, ...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>B[:, :]</TD><TD>[1.0; 1.0; 0.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>C[:, :]</TD><TD>[1.0, 1.0, 1.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>D[:, :]</TD><TD>[0.0]</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> conversionToTransferFunctionSISO <font color="darkgreen">
  &quot;Example to compute a transfer function from SISO state space representation&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>Modelica_LinearSystems2.TransferFunction</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;

  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">input </font>Real A[:,:]=[-1.0,0.0,0.0; 0.0,-2.0,0.0; 0.0,0.0,-3.0];
  <font color="blue">input </font>Real B[:,:]=[1.0; 1.0; 0.0];
  <font color="blue">input </font>Real C[:,:]=[1.0,1.0,1.0];
  <font color="blue">input </font>Real D[:,:]=[0.0];
  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font>
      <font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>( fileName)<font color="blue"> else </font>
      <font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>TransferFunction</A> tf;

<font color="blue">algorithm </font>
  tf :=<font color="red"> StateSpace.Conversion.toTransferFunction</font>(ss);
  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;StateSpace = &quot; +<font color="red"> String</font>(ss)+&quot;\n&quot;);
  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;TransferFunction = &quot; +<font color="red"> String</font>(tf));
  ok := true;

<font color="blue">end </font>conversionToTransferFunctionSISO;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE conversionToZerosAndPolesMIMO<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.conversionToZerosAndPolesMIMO"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.conversionToZerosAndPolesMIMO</H2>
<B>Example to compute a zeros-and-poles representation of a MIMO system from state space representation</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system matrices</TD></TR>
<TR><TD>Real</TD><TD>A[:, size(A, 1)]</TD><TD>[-1.0, 0.0, 0.0; 0.0, -2.0, ...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>B[size(A, 2), :]</TD><TD>[0.0, 1.0; 1.0, 1.0; -1.0, 0...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>C[:, size(A, 1)]</TD><TD>[0.0, 1.0, 1.0; 1.0, 1.0, 1.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>D[size(C, 1), size(B, 2)]</TD><TD>[1.0, 0.0; 0.0, 1.0]</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> conversionToZerosAndPolesMIMO <font color="darkgreen">
  &quot;Example to compute a zeros-and-poles representation of a MIMO system from state space representation&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>Modelica_LinearSystems2.ZerosAndPoles</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>.*;

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;

  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">input </font>Real A[:,<font color="red">size</font>(A, 1)]=[-1.0,0.0,0.0; 0.0,-2.0,0.0; 0.0,0.0,-3.0];
  <font color="blue">input </font>Real B[<font color="red">size</font>(A, 2),:]=[0.0,1.0; 1.0,1.0; -1.0,0.0];
  <font color="blue">input </font>Real C[:,<font color="red">size</font>(A, 1)]=[0.0,1.0,1.0; 1.0,1.0,1.0];
  <font color="blue">input </font>Real D[<font color="red">size</font>(C, 1),<font color="red">size</font>(B, 2)]=[1.0,0.0; 0.0,1.0];

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font><font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>( fileName, matrixName)<font color="blue"> else </font>
      <font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>Modelica_LinearSystems2.ZerosAndPoles</A> zp[:,:];

<font color="blue">algorithm </font>
  zp :=<font color="red"> Modelica_LinearSystems2.StateSpace.Conversion.toZerosAndPolesMIMO</font>(ss);
  <font color="blue">for </font>i1<font color="blue"> in </font>1:<font color="red">size</font>(ss.C, 1)<font color="blue"> loop</font>
    <font color="blue">for </font>i2<font color="blue"> in </font>1:<font color="red">size</font>(ss.B, 2)<font color="blue"> loop</font>
      <font color="red"> Modelica.Utilities.Streams.print</font>(&quot;ZerosAndPoles-TransferFunction[&quot; +<font color="red"> String</font>(i1) + &quot;,&quot; +
        <font color="red">String</font>(i2) + &quot;] = &quot; +<font color="red"> String</font>(zp[i1, i2]));

    <font color="blue">end for</font>;
  <font color="blue">end for</font>;
  ok := true;

<font color="blue">end </font>conversionToZerosAndPolesMIMO;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE conversionToZerosAndPolesSISO<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.conversionToZerosAndPolesSISO"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.conversionToZerosAndPolesSISO</H2>
<B>Example to compute a zeros and poles representation from SISO state space representation</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system matrices</TD></TR>
<TR><TD>Real</TD><TD>A[:, :]</TD><TD>[-1.0, 0.0, 0.0; 0.0, -2.0, ...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>B[:, :]</TD><TD>[1.0; 1.0; 0.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>C[:, :]</TD><TD>[1.0, 1.0, 1.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>D[:, :]</TD><TD>[0.0]</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> conversionToZerosAndPolesSISO <font color="darkgreen">
  &quot;Example to compute a zeros and poles representation from SISO state space representation&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>Modelica_LinearSystems2.ZerosAndPoles</A>;

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;

  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">input </font>Real A[:,:]=[-1.0,0.0,0.0; 0.0,-2.0,0.0; 0.0,0.0,-3.0];
  <font color="blue">input </font>Real B[:,:]=[1.0; 1.0; 0.0];
  <font color="blue">input </font>Real C[:,:]=[1.0,1.0,1.0];
  <font color="blue">input </font>Real D[:,:]=[0.0];
  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font><font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(
                                                          fileName, matrixName)<font color="blue"> else </font>
      <font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.ZerosAndPoles"
>Modelica_LinearSystems2.ZerosAndPoles</A> zp;

<font color="blue">algorithm </font>
  zp :=<font color="red"> StateSpace.Conversion.toZerosAndPoles</font>(ss);
  <font color="red">Modelica.Utilities.Streams.print</font>(<font color="red">String</font>(zp));
  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;ZerosAndPoles-TransferFunction = &quot; +<font color="red"> String</font>(
    zp));
  ok := true;

<font color="blue">end </font>conversionToZerosAndPolesSISO;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE designAssignPolesSISO<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOI.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISO" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISO"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.designAssignPolesSISO</H2>
<B>Example for pole placing using Ackermann&#39;s method</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes the gain vector k for the state space system
<pre> 
sc = StateSpace(A=[-1,1;0,-2],B=[0, 1],C=[1,0; 0, 1],D=[0; 0])
</pre>
such that for the state feedback 
<pre>u = -k*y = -k*x</pre> the closed-loop
poles are placed at 
<pre>p = {-3,-4}.</pre>
<pre></PRE><P>
Extends from <A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>sc</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>k[2]</TD><TD>Gain vector</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> designAssignPolesSISO <font color="darkgreen">
  &quot;Example for pole placing using Ackermann&#39;s method&quot;</font>
  <font color="blue">extends </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">output </font>Real k[2] <font color="darkgreen">&quot;Gain vector&quot;</font>;

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> sc=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[0; 1],
      C=[1,0; 0,1],
      D=[0; 0]);
<font color="blue">protected </font>
      <A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Modelica_LinearSystems2.Math.Complex</A> p[2]={
      <font color="red">Modelica_LinearSystems2.Math.Complex</font>(-3,0),
      <font color="red">Modelica_LinearSystems2.Math.Complex</font>(-4,0)};
<font color="blue">algorithm </font>
  k :=<font color="red"> Modelica_LinearSystems2.StateSpace.Design.assignPolesSI</font>(sc, p);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>designAssignPolesSISO;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE designAssignPolesMIMO<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOI.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesMIMO" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesMIMO"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.designAssignPolesMIMO</H2>
<B>Example for pole placing</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes the gain vector k for the state space system
<pre> 
ss = StateSpace(A=[-1,1;0,-2],B=[0, 1],C=[1,0; 0, 1],D=[0; 0])
</pre>
such that for the state feedback 
<pre>u = -k*y = -k*x</pre> the closed-loop
poles are placed at 
<pre>p = {-3,-4}.</pre>
<pre></PRE><P>
Extends from <A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ss</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A></TD><TD>p[:]</TD><TD>{Modelica_LinearSystems2.Mat...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>K[:, :]</TD><TD>Gain vector</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> designAssignPolesMIMO <font color="darkgreen">&quot;Example for pole placing&quot;</font>
  <font color="blue">extends </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">output </font>Real K[:,:] <font color="darkgreen">&quot;Gain vector&quot;</font>;

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[0; 1],
      C=[1,0; 0,1],
      D=[0; 0]);
      <font color="blue">input </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Modelica_LinearSystems2.Math.Complex</A> p[:]={
      <font color="red">Modelica_LinearSystems2.Math.Complex</font>(-3,0),
      <font color="red">Modelica_LinearSystems2.Math.Complex</font>(-4,0)};

<font color="blue">protected </font>
      <A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Modelica_LinearSystems2.Math.Complex</A> newPoles[:];
      Real S[:,:];

<font color="blue">algorithm </font>
  (K, S, newPoles) :=<font color="red"> Modelica_LinearSystems2.StateSpace.Design.assignPolesMI</font>(ss, p);
  <font color="red">Modelica_LinearSystems2.Math.Complex.Vectors.print</font>(&quot;newPoles&quot;, newPoles);
  newPoles :=<font color="red"> Modelica_LinearSystems2.Math.Complex.eigenValues</font>(ss.A-ss.B*K);
  <font color="red">Modelica_LinearSystems2.Math.Complex.Vectors.print</font>(&quot;newPoles&quot;, newPoles);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>designAssignPolesMIMO;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE designKalmanFilter<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOI.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designKalmanFilter" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_LinearSystems2.Examples.StateSpace.designKalmanFilter"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.designKalmanFilter</H2>
<B>Description</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ss</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>L[:, :]</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>kss</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> designKalmanFilter <font color="darkgreen">&quot;Description&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Modelica_LinearSystems2.Math.Complex</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>Modelica_LinearSystems2.TransferFunction</A>;
 <font color="blue">extends </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

 <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="red">Modelica_LinearSystems2.StateSpace</font>(<font color="red">TransferFunction</font>(n={1}, d={1,2,3,4}));
<font color="blue">protected </font>
 Real Q[:,:]=<font color="red">identity</font>(3);
 Real R[:,:]=[1];

<font color="blue">public </font>
 <font color="blue">output </font>Real L[:,:];
 <font color="blue">output </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> kss(
   <font color="blue">redeclare </font>Real A[<font color="red">size</font>(ss.A, 1),<font color="red">size</font>(ss.A, 1)],
   <font color="blue">redeclare </font>Real B[<font color="red">size</font>(ss.B, 1),<font color="red">size</font>(ss.B, 2) +<font color="red"> size</font>(ss.C, 1)],
   <font color="blue">redeclare </font>Real C[<font color="red">size</font>(ss.A, 1),<font color="red">size</font>(ss.A, 2)],
   <font color="blue">redeclare </font>Real D[<font color="red">size</font>(ss.A, 1),<font color="red">size</font>(ss.B, 2) +<font color="red"> size</font>(ss.C,1)]);

<font color="blue">algorithm </font>
 (L,kss) :=<font color="red"> StateSpace.Design.kalmanFilter</font>(
   ss,
   Q,
   R);

<font color="blue">end </font>designKalmanFilter;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE designLQG<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOI.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designLQG" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_LinearSystems2.Examples.StateSpace.designLQG"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.designLQG</H2>
<B>Description</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ssi</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> designLQG <font color="darkgreen">&quot;Description&quot;</font>

  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

 <font color="blue">extends </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

<font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssi=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-0.02, 0.005, 2.4,  -32; -0.14,  0.44,  -1.3,  -30; 0,  0.018,  -1.6,  1.2; 0, 0, 1, 0],
      B=[0.14,  -0.12; 0.36, -8.6; 0.35, 0.009; 0, 0],
      C=[0, 1, 0, 0; 0, 0, 0, 57.3],
      D=[0,0; 0,0]);

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;
  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
 <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font><font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(
                                                         fileName)<font color="blue"> else </font>ssi;
 Real Q[:,:] =<font color="red"> transpose</font>(ss.C)*ss.C <font color="darkgreen">&quot; state weighting matrix&quot;</font>;
 Real R[:,:] =<font color="red"> identity</font>(2) <font color="darkgreen">&quot; input weighting matrix&quot;</font>;
 Real V[:,:] =<font color="red"> identity</font>(2) <font color="darkgreen">&quot; covariance output noise matrix&quot;</font>;
 Real W[:,:] = ss.B*<font color="red">transpose</font>(ss.B) <font color="darkgreen">&quot; covariance input noise matrix&quot;</font>;
 Real Kc[<font color="red">size</font>(ss.B, 2),<font color="red">size</font>(ss.A, 1)] <font color="darkgreen">&quot;Controller feedback gain matrix&quot;</font>;
 Real Kf[<font color="red">size</font>(ss.A, 1),<font color="red">size</font>(ss.C, 1)] <font color="darkgreen">&quot;Kalman feedback gain matrix&quot;</font>;
 <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> sslgq(
    <font color="blue">redeclare </font>Real A[<font color="red">size</font>(ss.A, 1),<font color="red">size</font>(ss.A, 2)],
    <font color="blue">redeclare </font>Real B[<font color="red">size</font>(ss.B, 1),<font color="red">size</font>(ss.B, 2)],
    <font color="blue">redeclare </font>Real C[<font color="red">size</font>(ss.C, 1),<font color="red">size</font>(ss.C, 2)],
    <font color="blue">redeclare </font>Real D[<font color="red">size</font>(ss.D, 1),<font color="red">size</font>(ss.D, 2)]);

<font color="blue">algorithm </font>
 (Kc, Kf, sslgq) :=<font color="red"> StateSpace.Design.lqg</font>(ss, Q, R, V, W);

 <font color="red">Modelica_LinearSystems2.Math.Matrices.printMatrix</font>(Kc,6,&quot;Kc&quot;);
 <font color="red">Modelica_LinearSystems2.Math.Matrices.printMatrix</font>(Kf,6,&quot;Kf&quot;);
 <font color="red">Modelica.Utilities.Streams.print</font>(<font color="red">String</font>(sslgq));
 ok := true;

<font color="blue">end </font>designLQG;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE designLQR<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica_LinearSystems2.Examples.StateSpace.designAssignPolesSISOI.png" ALT="Modelica_LinearSystems2.Examples.StateSpace.designLQR" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica_LinearSystems2.Examples.StateSpace.designLQR"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.designLQR</H2>
<B>Description</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ssi</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> designLQR <font color="darkgreen">&quot;Description&quot;</font>

  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

 <font color="blue">extends </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

<font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssi=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[0, 1, 0, 0; 0, 0, 39.2, 0; 0, 0, 0, 1; 0, 0, 49, 0],
      B=[0; 1; 0; 1],
      C=[1, 0, 0, 0],
      D=[0]);

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;
  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font><font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(
                                                          fileName)<font color="blue"> else </font>ssi;
  Real Q[:,:]=<font color="red">identity</font>(4) <font color="darkgreen">&quot; state weighting matrix&quot;</font>;
  Real R[:,:]=<font color="red">identity</font>(1) <font color="darkgreen">&quot; input weighting matrix&quot;</font>;
  Real K[<font color="red">size</font>(ss.B, 2),<font color="red">size</font>(ss.A, 1)] <font color="darkgreen">&quot;Controller feedback gain matrix&quot;</font>;

<font color="blue">algorithm </font>
  K :=<font color="red"> StateSpace.Design.lqr</font>(ss, Q, R);

  <font color="red">Modelica_LinearSystems2.Math.Matrices.printMatrix</font>(K, 6, &quot;K&quot;);

  ok := true;

<font color="blue">end </font>designLQR;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE plotPolesAndZeros<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.plotPolesAndZeros"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.plotPolesAndZeros</H2>
<B>Example for plotting eigenvalues and invariant zeros of a state space system</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_LinearSystems2_Plot.html#Modelica_LinearSystems2.StateSpace.Plot.polesAndZeros"
>Modelica_LinearSystems2.StateSpace.Plot.polesAndZeros</A> (Plot poles (i.e. eigenvalues) and/or invariant zeros of a state space system).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ss</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>Linear system in state space form</TD></TR>
<TR><TD>Boolean</TD><TD>poles</TD><TD>true</TD><TD>= true, to plot the poles (i.e. the eigenvalues) of ss</TD></TR>
<TR><TD>Boolean</TD><TD>zeros</TD><TD>true</TD><TD>= true, to plot the (invariant) zeros of ss </TD></TR>
<TR><TD><A HREF="Modelica_LinearSystems2_Utilities_Plot_Records.html#Modelica_LinearSystems2.Utilities.Plot.Records.Diagram"
>Diagram</A></TD><TD>defaultDiagram</TD><TD>Modelica_LinearSystems2.Inte...</TD><TD>Default diagram layout</TD></TR>
<TR><TD><A HREF="Modelica_LinearSystems2_Utilities_Plot_Records.html#Modelica_LinearSystems2.Utilities.Plot.Records.Device"
>Device</A></TD><TD>device</TD><TD>Modelica_LinearSystems2.Util...</TD><TD>Properties of device where figure is shown</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> plotPolesAndZeros <font color="darkgreen">
  &quot;Example for plotting eigenvalues and invariant zeros of a state space system&quot;</font>

  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2"
>Modelica_LinearSystems2</A>;
  <font color="blue">extends </font><A HREF="Modelica_LinearSystems2_Plot.html#Modelica_LinearSystems2.StateSpace.Plot.polesAndZeros"
>Modelica_LinearSystems2.StateSpace.Plot.polesAndZeros</A>(ss=
    <font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-3,2,-3,4,5,6; 0,6,7,8,9,4; 0,2,3,0,78,6; 0,1,2,2,3,3; 0,13,34,0,0,1; 0,0,0,-17,0,0],
      B=[1,0; 0,1; 1,0; 0,1; 1,0; 0,1],
      C=[0,0,1,0,1,0; 0,1,0,0,1,1],
      D=[0,0; 0,0]));
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>plotPolesAndZeros;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE plotBodeMIMO<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.plotBodeMIMO"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.plotBodeMIMO</H2>
<B>Constructs zeros-and-poles-transfers from state space representation and plots the Bode diagrams with automatic determination of the frequency range to plot </B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system matrices</TD></TR>
<TR><TD>Real</TD><TD>A[:, size(A, 1)]</TD><TD>[-1.0, 0.0, 0.0; 0.0, -2.0, ...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>B[size(A, 2), :]</TD><TD>[0.0, 1.0; 1.0, 1.0; -1.0, 0...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>C[:, size(A, 1)]</TD><TD>[0.0, 1.0, 1.0; 1.0, 1.0, 1.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>D[size(C, 1), size(B, 2)]</TD><TD>[1.0, 0.0; 0.0, 1.0]</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> plotBodeMIMO <font color="darkgreen">
  &quot;Constructs zeros-and-poles-transfers from state space representation and plots the Bode diagrams with automatic determination of the frequency range to plot &quot;</font>

  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>Modelica_LinearSystems2.TransferFunction</A>;

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;

  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;

  <font color="blue">input </font>Real A[:,<font color="red">size</font>(A, 1)]=[-1.0,0.0,0.0; 0.0,-2.0,0.0; 0.0,0.0,-3.0];
  <font color="blue">input </font>Real B[<font color="red">size</font>(A, 2),:]=[0.0,1.0; 1.0,1.0; -1.0,0.0];
  <font color="blue">input </font>Real C[:,<font color="red">size</font>(A, 1)]=[0.0,1.0,1.0; 1.0,1.0,1.0];
  <font color="blue">input </font>Real D[<font color="red">size</font>(C, 1),<font color="red">size</font>(B, 2)]=[1.0,0.0; 0.0,1.0];

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font>
      <font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>( fileName)<font color="blue"> else </font><font color="red">StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);

<font color="blue">algorithm </font>
  <font color="red">Modelica_LinearSystems2.StateSpace.Plot.bodeMIMO</font>(    ss);
  ok := true;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>plotBodeMIMO;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE plotBodeSISO<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.plotBodeSISO"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.plotBodeSISO</H2>
<B>Constructs a zeros-and-poles-transfer function from state space representation and plots the Bode diagram with automatic determination of the frequency range to plot </B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>systemOnFile</TD><TD>false</TD><TD>true, if state space system is defined on file</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>Real</TD><TD>A[:, size(A, 1)]</TD><TD>[-1.0, 0.0, 0.0; 0.0, -2.0, ...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>B[size(A, 2), :]</TD><TD>[0.0, 1.0; 1.0, 1.0; -1.0, 0...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>C[:, size(A, 1)]</TD><TD>[0.0, 1.0, 1.0; 1.0, 1.0, 1.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>D[size(C, 1), size(B, 2)]</TD><TD>[1.0, 0.0; 0.0, 1.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Integer</TD><TD>iu</TD><TD>1</TD><TD>index of inout</TD></TR>
<TR><TD>Integer</TD><TD>iy</TD><TD>1</TD><TD>index of output</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> plotBodeSISO <font color="darkgreen">
  &quot;Constructs a zeros-and-poles-transfer function from state space representation and plots the Bode diagram with automatic determination of the frequency range to plot &quot;</font>

  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>Modelica_LinearSystems2.TransferFunction</A>;

  <font color="blue">input </font>Boolean systemOnFile=false <font color="darkgreen">
    &quot;true, if state space system is defined on file&quot;</font>;
  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;

  <font color="blue">input </font>Real A[:,<font color="red">size</font>(A, 1)]=[-1.0,0.0,0.0; 0.0,-2.0,0.0; 0.0,0.0,-3.0];
  <font color="blue">input </font>Real B[<font color="red">size</font>(A, 2),:]=[0.0,1.0; 1.0,1.0; -1.0,0.0];
  <font color="blue">input </font>Real C[:,<font color="red">size</font>(A, 1)]=[0.0,1.0,1.0; 1.0,1.0,1.0];
  <font color="blue">input </font>Real D[<font color="red">size</font>(C, 1),<font color="red">size</font>(B, 2)]=[1.0,0.0; 0.0,1.0];

  <font color="blue">input </font>Integer iu=1 <font color="darkgreen">&quot;index of inout&quot;</font>;
  <font color="blue">input </font>Integer iy=1 <font color="darkgreen">&quot;index of output&quot;</font>;
  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font><font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(
                                                          fileName)<font color="blue"> else </font>
      <font color="red">StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);

<font color="blue">algorithm </font>
  <font color="red">assert</font>(iu &lt;=<font color="red"> size</font>(ss.B, 2)<font color="blue"> and </font>iu &gt; 0, &quot;index for input is &quot; +<font color="red"> String</font>(iu) +
    &quot; which is not in [1, &quot; +<font color="red"> String</font>(<font color="red">size</font>(ss.B, 2)) + &quot;].&quot;);
  <font color="red">assert</font>(iy &lt;=<font color="red"> size</font>(ss.C, 1)<font color="blue"> and </font>iy &gt; 0, &quot;index for output is &quot; +<font color="red"> String</font>(iy) +
    &quot; which is not in [1, &quot; +<font color="red"> String</font>(<font color="red">size</font>(ss.C, 1)) + &quot;].&quot;);

  <font color="red">Modelica_LinearSystems2.StateSpace.Plot.bodeSISO</font>(
    ss,
    iu,
    iy);
  ok := true;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>plotBodeSISO;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE plotTimeResponse<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.plotTimeResponse"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.plotTimeResponse</H2>
<B>Time response plot example</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes the impulse response of the system
StateSpace <i>sc = StateSpace(A=[-1,1;0,-2],B=[1, 0;0, 1],C=[1,0; 0,1],D=[0, 0; 0, 0])</i>.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2_Types.html#Modelica_LinearSystems2.Types.TimeResponse"
>TimeResponse</A></TD><TD>response</TD><TD>Modelica_LinearSystems2.Type...</TD><TD>type of time response</TD></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ss</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> plotTimeResponse <font color="darkgreen">&quot;Time response plot example&quot;</font>

    <font color="blue">input </font><A HREF="Modelica_LinearSystems2_Types.html#Modelica_LinearSystems2.Types.TimeResponse"
>Modelica_LinearSystems2.Types.TimeResponse</A> response=
        Modelica_LinearSystems2.Types.TimeResponse.Step <font color="darkgreen">&quot;type of time response&quot;</font>;

    <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[4,0; 0,2],
      C=[2,0; 0,3; -1, 2],
      D=[0,0; 0,0; 1, 0],
      yNames={&quot;phi1&quot;, &quot;w&quot;, &quot;a&quot;},
      uNames={&quot;tau1&quot;, &quot;f1&quot;});

<font color="blue">algorithm </font>
  <font color="red">Modelica_LinearSystems2.StateSpace.Plot.timeResponse</font>(    ss=ss);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>plotTimeResponse;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE plotImpulse<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.plotImpulse"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.plotImpulse</H2>
<B>Impulse plot example</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes the impulse response of the system
StateSpace <i>sc = StateSpace(A=[-1,1;0,-2],B=[1, 0;0, 1],C=[1,0; 0,1],D=[0, 0; 0, 0])</i>.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ss</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> plotImpulse <font color="darkgreen">&quot;Impulse plot example&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[4,0; 0,2],
      C=[2,0; 0,3],
      D=[0,0; 0,0]);

<font color="blue">algorithm </font>
  <font color="red">Modelica_LinearSystems2.StateSpace.Plot.impulse</font>(    ss=ss);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>plotImpulse;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE plotInital<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.plotInital"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.plotInital</H2>
<B>Initial condition plot example</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes the initial condition response of the system
StateSpace <i>sc = StateSpace(A=[-1,1;0,-2],B=[1, 0;0, 1],C=[1,0; 0,1],D=[0, 0; 0, 0])</i> to the initial condition <i>x0=[1;1]</i>.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ss</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> plotInital <font color="darkgreen">&quot;Initial condition plot example&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[1,0; 0,1],
      C=[1,0; 0,1],
      D=[0,0; 0,0]);
<font color="blue">protected </font>
  Real x0[<font color="red">size</font>(ss.A, 1)]=<font color="red">ones</font>(<font color="red">size</font>(ss.A, 1)) <font color="darkgreen">&quot;Initial state vector&quot;</font>;
<font color="blue">algorithm </font>
  <font color="red">Modelica_LinearSystems2.StateSpace.Plot.initialResponse</font>(
     ss=ss, x0=x0);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>plotInital;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE plotRamp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.plotRamp"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.plotRamp</H2>
<B>Plot ramp response</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes the ramp response of the system
StateSpace <i>sc = StateSpace(A=[-1,1;0,-2],B=[1, 0;0, 1],C=[1,0; 0,1],D=[0, 0; 0, 0])</i>.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ss</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> plotRamp <font color="darkgreen">&quot;Plot ramp response&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=
      <font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[1,0; 0,1],
      C=[1,0; 0,1],
      D=[0,0; 0,0]);

<font color="blue">algorithm </font>
  <font color="red">Modelica_LinearSystems2.StateSpace.Plot.ramp</font>(ss=ss);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>plotRamp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE plotStep<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.plotStep"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.plotStep</H2>
<B>Step plot example</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes and plots the step response
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A></TD><TD>ss</TD><TD>Modelica_LinearSystems2.Stat...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> plotStep <font color="darkgreen">&quot;Step plot example&quot;</font>

  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

  <font color="blue">input </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[1,0; 0,1],
      C=[1,0; 0,1],
      D=[0,0; 0,0]);

<font color="blue">algorithm </font>
 <font color="red">Modelica_LinearSystems2.StateSpace.Plot.step</font>(    ss=ss);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>plotStep;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE plotZeros<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.plotZeros"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.plotZeros</H2>
<B>case studies of systems with zeros</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Computes the initial condition response of the system
StateSpace <i>sc = StateSpace(A=[-1,1;0,-2],B=[1, 0;0, 1],C=[1,0; 0,1],D=[0, 0; 0, 0])</i> to the initial condition <i>x0=[1;1]</i>.



This example plots the output y and the states (x1, x2, x3) of a system with the input

<blockquote><pre>
   u(t) = uk*exp(zk*t)
</pre></blockquote> 
where zk is an invariant zero of the system. Assuming appropriate initial conditions, the output of the system is forced to zero. It is demonstrated that the output can also be forced to zero by applying a transient unstable input. Although the output is zero, the states show transient and unstable behavior. In comparison, the outputs as an reaction of inputs with half or double frequency are not equal to zero.

<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> plotZeros <font color="darkgreen">&quot;case studies of systems with zeros&quot;</font>

  <font color="blue">import </font><A HREF="file:///C:/Programme/Dymola 7.4 Alpha/Modelica/Library/Modelica 3.1/help/Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>Modelica_LinearSystems2.TransferFunction</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2"
>Modelica_LinearSystems2</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Modelica_LinearSystems2.Math.Complex</A>;

<font color="blue">protected </font>
  <font color="blue">parameter </font>Real sampleT=0.001;
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>TransferFunction</A> tf=<font color="red">TransferFunction</font>({1,-0.1,1.0025}, {1,3,3,1});
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="red">StateSpace</font>(tf);
  <A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A> invZeros[:]=<font color="red">Modelica_LinearSystems2.StateSpace.Analysis.invariantZeros</font>( ss);
  <A HREF="Modelica_LinearSystems2_Math.html#Modelica_LinearSystems2.Math.Complex"
>Complex</A> invZero1;
  Real invMat[2*<font color="red">size</font>(ss.A, 1),2*<font color="red">size</font>(ss.A, 1)];
  Real t[:]=0:sampleT:20 <font color="darkgreen">&quot;Time vector: (number of samples)&quot;</font>;
  Real u[<font color="red">size</font>(t, 1),1];
  Real u2[<font color="red">size</font>(t, 1),1];
  Real y[:,1];
  Real y2[:,1];
  Integer windowID[<font color="red">size</font>(ss.C, 1)] <font color="darkgreen">&quot;ID of the used plot window&quot;</font>;
  Real x0[<font color="red">size</font>(ss.A, 1)]=<font color="red">zeros</font>(<font color="red">size</font>(ss.A, 1)) <font color="darkgreen">&quot;Initial state vector&quot;</font>;
  Real x[<font color="red">size</font>(t,1),<font color="red">size</font>(ss.A,1)];
  Real Ts=sampleT;
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.DiscreteStateSpace"
>Modelica_LinearSystems2.DiscreteStateSpace</A> sd=<font color="red">Modelica_LinearSystems2.DiscreteStateSpace</font>(ss, Ts, method=Modelica_LinearSystems2.Types.Method.StepExact);
  Boolean ok;

<font color="blue">algorithm </font>
  <font color="red">Modelica.Utilities.Streams.print</font>(<font color="red">String</font>(ss));
  <font color="red">Modelica.Utilities.Streams.print</font>(<font color="red">String</font>(tf));
  <font color="red">Modelica_LinearSystems2.Math.Complex.Vectors.print</font>(&quot;invariant zeros&quot;, invZeros);

  invZero1 := invZeros[1];
  invMat :=<font color="red"> Modelica.Math.Matrices.inv</font>([invZero1.re*<font color="red">identity</font>(<font color="red">size</font>(ss.A, 1)) -
    ss.A,invZero1.im*<font color="red">identity</font>(<font color="red">size</font>(ss.A, 1)); -invZero1.im*<font color="red">identity</font>(<font color="red">size</font>(ss.A,
    1)),invZero1.re*<font color="red">identity</font>(<font color="red">size</font>(ss.A, 1)) - ss.A]);
  x0 :=<font color="red"> vector</font>(2*(invMat[1:<font color="red">size</font>(ss.A, 1), 1:<font color="red">size</font>(ss.A, 1)])*ss.B);
  <font color="red">Modelica_LinearSystems2.Math.Vectors.printVector</font>(
    x0,
    6,
    &quot;x0&quot;);

  u[:, 1] := 2*<font color="red">exp</font>(invZero1.re*t).*<font color="red">vector</font>(<font color="red">cos</font>(t));
  (y,x) :=<font color="red"> Modelica_LinearSystems2.DiscreteStateSpace.timeResponse</font>(
    sd,
    u,
    x0);

  <font color="red">  Modelica_LinearSystems2.Utilities.Plot.diagram</font>(
        <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                  curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                           x=t,
                           y=y[:,1],
                           legend=&quot;y&quot;),
                         <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                           x=t,
                           y=u[:,1],
                           legend=&quot;u&quot;)},
                  heading=&quot;y and u&quot;,
                  xLabel=&quot;t [s]&quot;,
                  yLabel=&quot;y and u&quot;));

 <font color="red">Modelica_LinearSystems2.Utilities.Plot.diagram</font>(
       <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                 curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=x[:,1],
                          legend=&quot;x1&quot;),
                        <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=x[:,2],
                          legend=&quot;x2&quot;),
                        <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=x[:,3],
                          legend=&quot;x3&quot;)},
                 heading=&quot;x&quot;,
                 xLabel=&quot;t [s]&quot;,
                 yLabel=&quot;x&quot;));

  u[:, 1] := 2*<font color="red">exp</font>(invZero1.re*t).*<font color="red">vector</font>(<font color="red">cos</font>(2*t));

  y :=<font color="red"> Modelica_LinearSystems2.DiscreteStateSpace.timeResponse</font>(
    sd,
    u,
    x0);

  <font color="red">Modelica_LinearSystems2.Utilities.Plot.diagram</font>(
       <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                 curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,1],
                          legend=&quot;y&quot;),
                        <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=u[:,1],
                          legend=&quot;u&quot;)},
                 heading=&quot;y and u&quot;,
                 xLabel=&quot;t [s]&quot;,
                 yLabel=&quot;y, u&quot;));

 u[:, 1] := 2*<font color="red">exp</font>(invZero1.re*t).*<font color="red">vector</font>(<font color="red">cos</font>(0.5*t));

  y :=<font color="red"> Modelica_LinearSystems2.DiscreteStateSpace.timeResponse</font>(
    sd,
    u,
    x0);

  <font color="red"> Modelica_LinearSystems2.Utilities.Plot.diagram</font>(
       <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Diagram</font>(
                 curve={<font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=y[:,1],
                          legend=&quot;y&quot;),
                        <font color="red">Modelica_LinearSystems2.Utilities.Plot.Records.Curve</font>(
                          x=t,
                          y=u[:,1],
                          legend=&quot;u&quot;)},
                 heading=&quot;y and u&quot;,
                 xLabel=&quot;t [s]&quot;,
                 yLabel=&quot;y, u&quot;));

  ok := true;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>plotZeros;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE transformation<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.transformation"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.transformation</H2>
<B>Example to demonstrate the transformation to Jordan- observabilitiy- and controllability canonical form</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;NoName&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system matrices</TD></TR>
<TR><TD>Real</TD><TD>A[:, :]</TD><TD>[-1.0, 0.0, 0.0; 0.0, -2.0, ...</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>B[:, :]</TD><TD>[1.0; 1.0; 2.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>C[:, :]</TD><TD>[1.0, 1.0, 1.0]</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>D[:, :]</TD><TD>[0.0]</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> transformation <font color="darkgreen">
  &quot;Example to demonstrate the transformation to Jordan- observabilitiy- and controllability canonical form&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

  <font color="blue">input </font>String fileName=&quot;NoName&quot; <font color="darkgreen">&quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">input </font>Real A[:,:]=[-1.0,0.0,0.0; 0.0,-2.0,0.0; 0.0,0.0,-3.0];
  <font color="blue">input </font>Real B[:,:]=[1.0; 1.0; 2.0];
  <font color="blue">input </font>Real C[:,:]=[1.0,1.0,1.0];
  <font color="blue">input </font>Real D[:,:]=[0.0];

<font color="blue">protected </font>
  Boolean systemOnFile=fileName &lt;&gt; &quot;NoName&quot;;
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font><font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(
                                                          fileName, matrixName)<font color="blue"> else </font>
            <font color="red">StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssj=<font color="red">StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);

  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> sso=<font color="red">StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);

  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ssc=<font color="red">StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);

  Real ctrb[:,:]=<font color="red">StateSpace.Analysis.controllabilityMatrix</font>(ss);

<font color="blue">public </font>
  <font color="blue">output </font>Boolean ok;

<font color="blue">algorithm </font>
  ssj :=<font color="red"> Modelica_LinearSystems2.StateSpace.Transformation.toDiagonalForm</font>(
                                                      ss);
  sso :=<font color="red"> Modelica_LinearSystems2.StateSpace.Transformation.toObservabilityForm</font>(
                                                     ss);
  ssc :=<font color="red"> Modelica_LinearSystems2.StateSpace.Transformation.toControllabilityForm</font>(
                                                    ss);
  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;\n\noriginal sate space system:\n&quot;);
  <font color="red">Modelica.Utilities.Streams.print</font>(<font color="red">String</font>(
    ss,
    6,
    &quot;ss&quot;));
  <font color="red">Modelica_LinearSystems2.Math.Matrices.printMatrix</font>(
    ctrb,
    6,
    &quot;controllability matrix&quot;);

  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;\n\nJordan form:\n&quot;);
  <font color="red">Modelica.Utilities.Streams.print</font>(<font color="red">String</font>(
    ssj,
    6,
    &quot;ssy&quot;));

  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;\n\nobservability canonical form:\n&quot;);
  <font color="red">Modelica.Utilities.Streams.print</font>(<font color="red">String</font>(
    sso,
    6,
    &quot;sso&quot;));

  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;\n\ncontrollability canonical form:\n&quot;);
  <font color="red">Modelica.Utilities.Streams.print</font>(<font color="red">String</font>(
    ssc,
    6,
    &quot;ssc&quot;));

  ok := true;

<font color="blue">end </font>transformation;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE transformationExtract<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.transformationExtract"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.transformationExtract</H2>
<B>Example how to extract input/output related subsystems from state space system record</B><p>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> transformationExtract <font color="darkgreen">
  &quot;Example how to extract input/output related subsystems from state space system record&quot;</font>

<font color="blue">protected </font>
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> ss=<font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=[-1,1; 0,-2],
      B=[1,0; 0,1],
      C=[1,0; 0,1],
      D=[0,0; 0,0]);
Integer i1[1]={1};
Integer i2[1]={1};

<A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A> subSys(
    <font color="blue">redeclare </font>Real A[<font color="red">size</font>(ss.A, 1),<font color="red">size</font>(ss.A, 2)],
    <font color="blue">redeclare </font>Real B[<font color="red">size</font>(ss.B, 1),<font color="red">size</font>(i1,1)],
    <font color="blue">redeclare </font>Real C[<font color="red">size</font>(i2,1),<font color="red">size</font>(ss.C, 2)],
    <font color="blue">redeclare </font>Real D[<font color="red">size</font>(i2, 1),<font color="red">size</font>(i1, 1)]) <font color="darkgreen">&quot;Subsystem state space record&quot;</font>;
<font color="blue">algorithm </font>
subSys :=<font color="red">  Modelica_LinearSystems2.StateSpace.Transformation.extract</font>(
    ss,
    i1,
    i2);
 <font color="red">Modelica.Utilities.Streams.print</font>(&quot;Subsystem is &quot; +<font color="red">String</font>(subSys));
<font color="blue">end </font>transformationExtract;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE transformationToIrreducibleForm<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica_LinearSystems2.Examples.StateSpace.transformationToIrreducibleForm"></A><A HREF="Modelica_LinearSystems2_Examples_StateSpace.html#Modelica_LinearSystems2.Examples.StateSpace"
>Modelica_LinearSystems2.Examples.StateSpace</A>.transformationToIrreducibleForm</H2>
<B>Example to compute the minimal state space realization of a given SISO state space realization</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
This example shows the usage of <b>function Modelica_LinearSystems2.StateSpace.reduceSystem</b> which compute
a controllable and observable state space realization of a given state space realization.
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>A[:, :]</TD><TD>fill(0, 0, 0)</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>B[:, :]</TD><TD>fill(0, 0, 1)</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>C[:, :]</TD><TD>fill(0, 1, 0)</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>D[:, :]</TD><TD>fill(0, 1, 1)</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>system data definition</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>DataDir + &quot;abcd_siso2.mat&quot;</TD><TD>file where matrix [A, B; C, D] is stored</TD></TR>
<TR><TD>String</TD><TD>matrixName</TD><TD>&quot;ABCD&quot;</TD><TD>Name of the state space system matrix</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>ok</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> transformationToIrreducibleForm <font color="darkgreen">
  &quot;Example to compute the minimal state space realization of a given SISO state space realization&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.TransferFunction"
>Modelica_LinearSystems2.TransferFunction</A>;
  <font color="blue">import </font><A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>Modelica_LinearSystems2.StateSpace</A>;

  <font color="blue">input </font>String fileName=DataDir + &quot;abcd_siso2.mat&quot; <font color="darkgreen">
    &quot;file where matrix [A, B; C, D] is stored&quot;</font>;
  <font color="blue">input </font>String matrixName=&quot;ABCD&quot; <font color="darkgreen">&quot;Name of the state space system matrix&quot;</font>;

  <font color="blue">input </font>Real A[:,:]=<font color="red">fill</font>(
      0,
      0,
      0);
  <font color="blue">input </font>Real B[:,:]=<font color="red">fill</font>(
      0,
      0,
      1);
  <font color="blue">input </font>Real C[:,:]=<font color="red">fill</font>(
      0,
      1,
      0);
  <font color="blue">input </font>Real D[:,:]=<font color="red">fill</font>(
      0,
      1,
      1);

  <font color="blue">output </font>Boolean ok;

<font color="blue">protected </font>
  Boolean systemOnFile=fileName &lt;&gt; &quot;NoName&quot;;
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> ss=<font color="blue">if </font>systemOnFile<font color="blue"> then </font>
      <font color="red">Modelica_LinearSystems2.StateSpace.Import.fromFile</font>(  fileName)<font color="blue"> else </font>
      <font color="red">Modelica_LinearSystems2.StateSpace</font>(
      A=A,
      B=B,
      C=C,
      D=D);
  <A HREF="Modelica_LinearSystems2.html#Modelica_LinearSystems2.StateSpace"
>StateSpace</A> sso=<font color="red">Modelica_LinearSystems2.StateSpace.Transformation.toIrreducibleForm</font>(
                                                                 ss);

<font color="blue">algorithm </font>
  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;original system:\n&quot; +<font color="red"> String</font>(ss));
  <font color="red">Modelica.Utilities.Streams.print</font>(&quot;\n\nminimal system:\n&quot; +<font color="red"> String</font>(sso));
  ok := true;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>transformationToIrreducibleForm;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.Dymola.com/">Dymola</a> Fri Jan 15 12:28:39 2010.
</address></BODY>
</HTML>
